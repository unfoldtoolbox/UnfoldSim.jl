<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DocStrings · UnfoldSim.jl</title><meta name="title" content="DocStrings · UnfoldSim.jl"/><meta property="og:title" content="DocStrings · UnfoldSim.jl"/><meta property="twitter:title" content="DocStrings · UnfoldSim.jl"/><meta name="description" content="Documentation for UnfoldSim.jl."/><meta property="og:description" content="Documentation for UnfoldSim.jl."/><meta property="twitter:description" content="Documentation for UnfoldSim.jl."/><meta property="og:url" content="https://unfoldtoolbox.github.io/UnfoldSim.jl/api/"/><meta property="twitter:url" content="https://unfoldtoolbox.github.io/UnfoldSim.jl/api/"/><link rel="canonical" href="https://unfoldtoolbox.github.io/UnfoldSim.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">UnfoldSim.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../generated/tutorials/quickstart/">Quickstart</a></li><li><a class="tocitem" href="../generated/tutorials/simulateERP/">Simulate ERPs</a></li><li><a class="tocitem" href="../generated/tutorials/poweranalysis/">Poweranalysis</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../generated/reference/overview/">Overview: Toolbox Functions</a></li><li><a class="tocitem" href="../generated/reference/noisetypes/">Overview: NoiseTypes</a></li><li><a class="tocitem" href="../generated/reference/onsettypes/">Overview: OnsetTypes</a></li><li><a class="tocitem" href="../generated/reference/basistypes/">Overview: Components (EEG, fMRI, Pupil)</a></li></ul></li><li><span class="tocitem">HowTo</span><ul><li><a class="tocitem" href="../generated/HowTo/newDesign/">Define a new, (imbalanced) design</a></li><li><a class="tocitem" href="../generated/HowTo/repeatTrials/">Repeating a design</a></li><li><a class="tocitem" href="../generated/HowTo/newComponent/">Define a new duration &amp; jitter component</a></li><li><a class="tocitem" href="../generated/HowTo/multichannel/">Generate multi channel data</a></li><li><a class="tocitem" href="../generated/HowTo/predefinedData/">Use predefined design / onsets data</a></li></ul></li><li class="is-active"><a class="tocitem" href>DocStrings</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>DocStrings</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DocStrings</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldSim.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.LinearModelComponent" href="#UnfoldSim.LinearModelComponent"><code>UnfoldSim.LinearModelComponent</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A multiple regression component for one subject</p><ul><li><code>basis</code>: an object, if accessed, provides a &#39;basis-function&#39;, e.g. <code>hanning(40)</code>, this defines the response at a single event. It will be weighted by the model-prediction</li><li><code>formula</code>: StatsModels Formula-Object  <code>@formula 0~1+cond</code> (left side must be 0)</li><li><code>β</code> Vector of betas, must fit the formula</li><li><code>contrasts</code>: Dict. Default is empty, e.g. <code>Dict(:condA=&gt;EffectsCoding())</code></li></ul><p>All arguments can be named, in that case <code>contrasts</code> is optional</p><p>Works best with <code>SingleSubjectDesign</code></p><pre><code class="language-julia hljs">LinearModelComponent(;
    basis=hanning(40),
    formula=@formula(0~1+cond),
    β = [1.,2.],
    contrasts=Dict(:cond=&gt;EffectsCoding())
)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L32-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.MixedModelComponent" href="#UnfoldSim.MixedModelComponent"><code>UnfoldSim.MixedModelComponent</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A component that adds a hierarchical relation between parameters according to a LMM defined via MixedModels.jl</p><ul><li><code>basis</code>: an object, if accessed, provides a &#39;basis-function&#39;, e.g. <code>hanning(40)</code>, this defines the response at a single event. It will be weighted by the model-prediction</li><li><code>formula</code>: Formula-Object in the style of MixedModels.jl e.g. <code>@formula 0~1+cond + (1|subject)</code> - left-handside is ignored</li><li><code>β</code> Vector of betas, must fit the formula</li><li><code>σs</code> Dict of random effect variances, e.g. <code>Dict(:subject=&gt;[0.5,0.4])</code> or to specify correlationmatrix <code>Dict(:subject=&gt;[0.5,0.4,I(2,2)],...)</code>. Technically, this will be passed to MixedModels.jl <code>create_re</code> function, which creates the θ matrices.</li><li><code>contrasts</code>: Dict in the style of MixedModels.jl. Default is empty.</li></ul><p>All arguments can be named, in that case <code>contrasts</code> is optional</p><p>Works best with <code>MultiSubjectDesign</code></p><pre><code class="language-julia hljs">MixedModelComponent(;
    basis=hanning(40),
    formula=@formula(0~1+cond+(1+cond|subject)),
    β = [1.,2.],
    σs= Dict(:subject=&gt;[0.5,0.4]),
    contrasts=Dict(:cond=&gt;EffectsCoding())
)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L1-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.MultiSubjectDesign" href="#UnfoldSim.MultiSubjectDesign"><code>UnfoldSim.MultiSubjectDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><ul><li>n_subjects::Int -&gt; number of subjects</li><li>n_items::Int -&gt; number of items (sometimes ≈trials)</li><li>subjects_between = nothing -&gt; effects between subjects, e.g. young vs old </li><li>items_between = nothing -&gt; effects between items, e.g. natural vs artificial images, but shown to all subjects</li><li>both_within = nothing	-&gt; effects completly crossed</li><li>tableModifyFun = x-&gt;x; # can be used to sort, or x-&gt;shuffle(MersenneTwister(42),x) - be sure to fix/update the rng accordingly!!</li></ul><p>tipp: check the resulting dataframe using <code>generate(design)</code></p><pre><code class="language-julia hljs"># declaring same condition both sub-between and item-between results in a full between subject/item design
design = MultiSubjectDesign(;
		n_items = 10,
		n_subjects = 30,
		subjects_between = Dict(:cond =&gt; [&quot;levelA&quot;, &quot;levelB&quot;]),
		items_between = Dict(:cond =&gt; [&quot;levelA&quot;, &quot;levelB&quot;]),
		);</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/design.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.MultichannelComponent" href="#UnfoldSim.MultichannelComponent"><code>UnfoldSim.MultichannelComponent</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Wrapper for an <code>AbstractComponent</code> to project it to multiple target-channels via <code>projection</code>. optional adds <code>noise</code> to the source prior to projection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L61-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.RepeatDesign" href="#UnfoldSim.RepeatDesign"><code>UnfoldSim.RepeatDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><p>repeat a design DataFrame multiple times to mimick repeatedly recorded trials</p><pre><code class="language-julia hljs">designOnce = MultiSubjectDesign(;
		n_items=2,
		n_subjects = 2,
		subjects_between =Dict(:cond=&gt;[&quot;levelA&quot;,&quot;levelB&quot;]),
		items_between =Dict(:cond=&gt;[&quot;levelA&quot;,&quot;levelB&quot;]),
		);

design = RepeatDesign(designOnce,4);</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/design.jl#L130-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.SingleSubjectDesign" href="#UnfoldSim.SingleSubjectDesign"><code>UnfoldSim.SingleSubjectDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><ul><li>conditions = Dict of conditions, e.g. <code>Dict(:A=&gt;[&quot;a_small&quot;,&quot;a_big&quot;],:B=&gt;[&quot;b_tiny&quot;,&quot;b_large&quot;])</code></li><li>tableModifyFun = x-&gt;x; # can be used to sort, or x-&gt;shuffle(MersenneTwister(42),x) - be sure to fix/update the rng accordingly!!</li></ul><p>Number of trials / rows in <code>generate(design)</code> depend on the full factorial of your <code>conditions</code>.</p><p>To increase the number of repetitions simply use <code>RepeatDesign(SingleSubjectDesign(...),5)</code></p><p>If conditions are omitted (or set to <code>nothing</code>), a single trial is simulated with a column <code>:dummy</code> and content <code>:dummy</code> - this is for convenience.</p><p>tipp: check the resulting dataframe using <code>generate(design)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/design.jl#L31-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.size-Tuple{MultiSubjectDesign}" href="#Base.size-Tuple{MultiSubjectDesign}"><code>Base.size</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns dimension of experiment design</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/design.jl#L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DSP.Windows.hanning-Tuple{Any, Any, Any}" href="#DSP.Windows.hanning-Tuple{Any, Any, Any}"><code>DSP.Windows.hanning</code></a> — <span class="docstring-category">Method</span></header><section><div><p>generate a hanning window</p><p>duration: in s offset: in s, defines hanning peak sfreq: sampling rate in Hz</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/bases.jl#L10-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.adderp!-Tuple{Any, Vector, Vararg{Any, 4}}" href="#UnfoldSim.adderp!-Tuple{Any, Vector, Vararg{Any, 4}}"><code>UnfoldSim.adderp!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Helper function to add inplace the erps to the EEG, but for both 2D (1 channel) and 3D (X channel case)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/simulation.jl#L131-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.closest_src-Tuple{AbstractVector{&lt;:AbstractVector}, Any}" href="#UnfoldSim.closest_src-Tuple{AbstractVector{&lt;:AbstractVector}, Any}"><code>UnfoldSim.closest_src</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">closest_src(coords_list::AbstractVector{&lt;:AbstractVector}, pos)
closest_src(coords::Vector{&lt;:Real}, pos)</code></pre><p>Takes an array of &#39;m&#39; target coordinate vector (size 3) (or vector of vectors) and a matrix (n-by-3) of all available positions, and returns an array of size &#39;m&#39; containing the indices of the respective items in &#39;pos&#39; that are nearest to each of the target coordinates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/helper.jl#L44-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.closest_src-Tuple{Hartmut, String}" href="#UnfoldSim.closest_src-Tuple{Hartmut, String}"><code>UnfoldSim.closest_src</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">closest_src(head::Hartmut,label::String)</code></pre><p>Returns src-<code>ix</code> of the Headmodel <code>Hartmut</code> which is closest to the average of the <code>label</code>.</p><div class="admonition is-category-important"><header class="admonition-header">Important</header><div class="admonition-body"><p>We use the average in eucledean space, but the cortex is a curved surface. In most cases they will not overlap. Ideally we would calculate the average on the surface, but this is a bit more complex to do (you&#39;d need to calculate the vertices etc.)</p></div></div><pre><code class="language-julia hljs">hartmut = headmodel()
pos = closest_src(hartmut=&gt;&quot;Left Middle Temporal Gyrus, posterior division&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/helper.jl#L68-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.convert-NTuple{4, Any}" href="#UnfoldSim.convert-NTuple{4, Any}"><code>UnfoldSim.convert</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function to convert output similar to unfold (data, evts)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/helper.jl#L14-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.gen_noise-Tuple{Any, UnfoldSim.RealisticNoise, Int64}" href="#UnfoldSim.gen_noise-Tuple{Any, UnfoldSim.RealisticNoise, Int64}"><code>UnfoldSim.gen_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gen_noise(t::RealisticNoise, n::Int)</code></pre><p>Generate noise of a given type t and length n</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/noise.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.gen_noise-Tuple{Any, Union{PinkNoise, RedNoise}, Int64}" href="#UnfoldSim.gen_noise-Tuple{Any, Union{PinkNoise, RedNoise}, Int64}"><code>UnfoldSim.gen_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gen_noise(t::Union{PinkNoise, RedNoise}, n::Int)</code></pre><p>Generate noise of a given type t and length n</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/noise.jl#L46-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.gen_noise-Tuple{Any, WhiteNoise, Int64}" href="#UnfoldSim.gen_noise-Tuple{Any, WhiteNoise, Int64}"><code>UnfoldSim.gen_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gen_noise(t::WhiteNoise, n::Int)</code></pre><p>Generate noise of a given type t and length n</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/noise.jl#L59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.generate-Tuple{MultiSubjectDesign}" href="#UnfoldSim.generate-Tuple{MultiSubjectDesign}"><code>UnfoldSim.generate</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Generates full factorial Dataframe according to MixedModelsSim.jl &#39;s simdat<em>crossed function Note: n</em>items = you can think of it as <code>trials</code> or better, as stimuli</p><p>Note: No condition can be named <code>dv</code> which is used internally in MixedModelsSim / MixedModels as a dummy left-side</p><p>Afterwards applies expdesign.tableModifyFun.  Could be used to duplicate trials, sort, subselect etc.</p><p>Finally it sorts by <code>:subject</code></p><p>julia&gt; d = MultiSubjectDesign(;n<em>subjects = 10,n</em>items=20,both_within= Dict(:A=&gt;nlevels(5),:B=&gt;nlevels(2))) julia&gt; generate(d)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/design.jl#L78-L90">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.generate-Tuple{SingleSubjectDesign}" href="#UnfoldSim.generate-Tuple{SingleSubjectDesign}"><code>UnfoldSim.generate</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Generates full-factorial DataFrame of expdesign.conditions</p><p>Afterwards applies expdesign.tableModifyFun.</p><p>If conditions is <code>nothing</code>, a single trial is simulated with a column <code>:dummy</code> and content <code>:dummy</code> - this is for convenience.</p><p>julia&gt; d = SingleSubjectDesign(;conditions= Dict(:A=&gt;nlevels(5),:B=&gt;nlevels(2))) julia&gt; generate(d)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/design.jl#L53-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.hartmut_citation-Tuple{}" href="#UnfoldSim.hartmut_citation-Tuple{}"><code>UnfoldSim.hartmut_citation</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns citation-string for HArtMuT</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/headmodel.jl#L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.headmodel-Tuple{}" href="#UnfoldSim.headmodel-Tuple{}"><code>UnfoldSim.headmodel</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Load a headmodel, using Artifacts.jl automatically downloads the required files</p><p>Currently only <code>type=&quot;hartmut&quot;</code> is implemented</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/headmodel.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.hrf-Tuple{}" href="#UnfoldSim.hrf-Tuple{}"><code>UnfoldSim.hrf</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Generate a HRF kernel. </p><p>TR = 1/sfreq default parameters taken from SPM</p><p>Code adapted from Unfold.jl</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/bases.jl#L33-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.leadfield-Tuple{Hartmut}" href="#UnfoldSim.leadfield-Tuple{Hartmut}"><code>UnfoldSim.leadfield</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns the leadfield</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/headmodel.jl#L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.magnitude-Tuple{AbstractHeadmodel}" href="#UnfoldSim.magnitude-Tuple{AbstractHeadmodel}"><code>UnfoldSim.magnitude</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Extracts magnitude of the orientation-including leadfield.</p><p>By default uses the orientation specified in the headmodel</p><p>Fallback: along the third dimension using <code>norm</code> - the maximal projection</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/headmodel.jl#L79-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.magnitude-Tuple{Hartmut}" href="#UnfoldSim.magnitude-Tuple{Hartmut}"><code>UnfoldSim.magnitude</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Extract magnitude of 3-orientation-leadfield,  <code>type</code> (default: &quot;perpendicular&quot;) =&gt; uses the provided source-point orientations - otherwise falls back to <code>norm</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/headmodel.jl#L88-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.n_channels-Tuple{AbstractComponent}" href="#UnfoldSim.n_channels-Tuple{AbstractComponent}"><code>UnfoldSim.n_channels</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns the number of channels. By default = 1</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L84-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.n_channels-Tuple{MultichannelComponent}" href="#UnfoldSim.n_channels-Tuple{MultichannelComponent}"><code>UnfoldSim.n_channels</code></a> — <span class="docstring-category">Method</span></header><section><div><p>for <code>MultichannelComponent</code> returns the length of the projection vector</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L89-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.padarray-Tuple{Vector, Tuple, Any}" href="#UnfoldSim.padarray-Tuple{Vector, Tuple, Any}"><code>UnfoldSim.padarray</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Pads array with specified value, length padarray(arr, len, val)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/helper.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.predef_2x2-Tuple{Random.AbstractRNG}" href="#UnfoldSim.predef_2x2-Tuple{Random.AbstractRNG}"><code>UnfoldSim.predef_2x2</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">predef_2x2(rng::AbstractRNG;kwargs...)</code></pre><p>Most used kwargs is: <code>return_epoched=true</code> to ignore the overlap/onset bits and return already epoched data</p><p><strong>design</strong></p><ul><li><code>n_items</code>=100,</li><li><code>n_subjects</code>=1,</li><li><code>conditions</code> = Dict(:A=&gt;[&quot;a<em>small&quot;,&quot;a</em>big&quot;],:B=&gt;[&quot;b<em>tiny&quot;,&quot;b</em>large&quot;]),</li><li><code>tableModifyFun</code> = x-&gt;shuffle(deepcopy(rng),x),</li></ul><p><strong>component / signal</strong></p><ul><li><code>signalsize</code> = 100, length of simulated hanning window</li><li><code>basis</code><code>= hanning(signalsize), the actual &quot;function&quot;,</code>signalsize` is only used here</li><li><code>β</code> = [1,-0.5,.5,+1], the parameters</li><li><code>σs</code> = Dict(:subject=&gt;[1,0.5,0.5,0.5],:item=&gt;[1]), - only in n_subjects&gt;=2 case, specifies the random effects</li><li><code>contrasts</code> = Dict(:A=&gt;EffectsCoding(),:B=&gt;EffectsCoding()) - effect coding by default</li><li><code>formula</code> = n_subjects==1 ? @formula(0~1+A<em>B) : @formula(dv~1+A</em>B+(A*B|subject)+(1|item)),</li></ul><p><strong>noise</strong></p><ul><li><code>noiselevel</code> = 0.2,</li><li><code>noise</code> = PinkNoise(;noiselevel=noiselevel),</li></ul><p><strong>onset</strong></p><ul><li><code>overlap</code> = (0.5,0.2),</li><li><code>onset</code>=UniformOnset(;offset=signalsize<em>overlap[1],width=signalsize</em>overlap[2]), #put offset to 1 for no overlap. put width to 0 for no jitter</li></ul><p>Careful if you modify n<em>items with n</em>subjects = 1, n_items has to be a multiple of 4 (or your equivalent conditions factorial, e.g. all combinations length)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/predefinedSimulations.jl#L139-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.predef_eeg-Tuple{Any}" href="#UnfoldSim.predef_eeg-Tuple{Any}"><code>UnfoldSim.predef_eeg</code></a> — <span class="docstring-category">Method</span></header><section><div><p>predef<em>eeg(;kwargs...) predef</em>eeg(rng;kwargs...) predef<em>eeg(rng,n</em>subjects;kwargs...)</p><p>Gene rates a P1/N1/P3 complex. In case <code>n_subjects</code> is defined - <code>MixedModelComponents</code><code>are generated, else</code>LinearModelComponents`</p><p>Most used kwargs is: <code>return_epoched=true</code> to ignore the overlap/onset bits and return already epoched data</p><p><strong>Default params:</strong></p><p>. n_repeats=100</p><ul><li>tableModifyFun = x-&gt;shuffle(deepcopy(rng),x # random trial order</li><li>conditions = Dict(...),</li></ul><p><strong>component / signal</strong></p><ul><li>sfreq = 100,</li><li>p1 = (p100(;sfreq=sfreq), @formula(0~1),[5],Dict()), # P1 amp 5, no effects</li><li>n1 = (n170(;sfreq=sfreq), @formula(0~1+condition),[5,-3],Dict()), # N1 amp 5, dummycoded condition effect (levels &quot;car&quot;, &quot;face&quot;) of -3</li><li>p3 = (p300(;sfreq=sfreq), @formula(0~1+continuous),[5,1],Dict()), # P3 amp 5, continuous effect range [-5,5] with slope 1</li></ul><p><strong>noise</strong></p><ul><li>noiselevel = 0.2,</li><li>noise = PinkNoise(;noiselevel=noiselevel),</li></ul><p><strong>onset</strong></p><ul><li>overlap = (0.5,0.2), # offset + width/length of Uniform noise. put offset to 1 for no overlap. put width to 0 for no jitter</li><li>onset=UniformOnset(;offset=sfreq<em>0.5</em>overlap[1],width=sfreq<em>0.5</em>overlap[2]), </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/predefinedSimulations.jl#L9-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate-Tuple{Any, AbstractComponent, Simulation}" href="#UnfoldSim.simulate-Tuple{Any, AbstractComponent, Simulation}"><code>UnfoldSim.simulate</code></a> — <span class="docstring-category">Method</span></header><section><div><p><strong>by default call simulate with <code>::Abstractcomponent,::AbstractDesign</code>`, but allow for custom types</strong></p><p><strong>making use of other information in simulation</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L117-L120">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate-Tuple{Any, LinearModelComponent, AbstractDesign}" href="#UnfoldSim.simulate-Tuple{Any, LinearModelComponent, AbstractDesign}"><code>UnfoldSim.simulate</code></a> — <span class="docstring-category">Method</span></header><section><div><p>simulate a linearModel</p><p>julia&gt; c = UnfoldSim.LinearModelComponent([0,1,1,0],@formula(0~1+cond),[1,2],Dict()) julia&gt; design = MultiSubjectDesign(;n<em>subjects=2,n</em>items=50,item_between=(;:cond=&gt;[&quot;A&quot;,&quot;B&quot;])) julia&gt; simulate(StableRNG(1),c,design)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L124-L130">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate-Tuple{Any, MixedModelComponent, AbstractDesign}" href="#UnfoldSim.simulate-Tuple{Any, MixedModelComponent, AbstractDesign}"><code>UnfoldSim.simulate</code></a> — <span class="docstring-category">Method</span></header><section><div><p>simulate MixedModelComponent</p><p>julia&gt; design = MultiSubjectDesign(;n<em>subjects=2,n</em>items=50,item_between=(;:cond=&gt;[&quot;A&quot;,&quot;B&quot;])) julia&gt; c = UnfoldSim.MixedModelComponent([0.,1,1,0],@formula(0~1+cond+(1|subject)),[1,2],Dict(:subject=&gt;[2],),Dict()) julia&gt; simulate(StableRNG(1),c,design)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L149-L156">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate-Tuple{Any, Vector{&lt;:AbstractComponent}, Simulation}" href="#UnfoldSim.simulate-Tuple{Any, Vector{&lt;:AbstractComponent}, Simulation}"><code>UnfoldSim.simulate</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Simulates erp data given the specified parameters </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/simulation.jl#L146-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.weight_σs-Tuple{Dict, Float64, Float64}" href="#UnfoldSim.weight_σs-Tuple{Dict, Float64, Float64}"><code>UnfoldSim.weight_σs</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Weights a σs Dict for MixedModels.jl by a Float64</p><p>Finally sales it by σ_lmm, as a trick to simulate noise-free LMMs</p><p>I anticipate a function     <code>function weight_σs(σs::Dict,b_σs::Dict,σ_lmm::Float64)</code> where each σs entry can be weighted individually</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/78d1e78653e7e363433dccfd28febf87a9fe6658/src/component.jl#L220-L228">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../generated/HowTo/predefinedData/">« Use predefined design / onsets data</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 2 February 2024 13:04">Friday 2 February 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
