<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API / DocStrings · UnfoldSim.jl</title><meta name="title" content="API / DocStrings · UnfoldSim.jl"/><meta property="og:title" content="API / DocStrings · UnfoldSim.jl"/><meta property="twitter:title" content="API / DocStrings · UnfoldSim.jl"/><meta name="description" content="Documentation for UnfoldSim.jl."/><meta property="og:description" content="Documentation for UnfoldSim.jl."/><meta property="twitter:description" content="Documentation for UnfoldSim.jl."/><meta property="og:url" content="https://unfoldtoolbox.github.io/UnfoldSim.jl/api/"/><meta property="twitter:url" content="https://unfoldtoolbox.github.io/UnfoldSim.jl/api/"/><link rel="canonical" href="https://unfoldtoolbox.github.io/UnfoldSim.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">UnfoldSim.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../generated/tutorials/quickstart/">Quickstart</a></li><li><a class="tocitem" href="../generated/tutorials/simulateERP/">Simulate ERPs</a></li><li><a class="tocitem" href="../generated/tutorials/poweranalysis/">Poweranalysis</a></li><li><a class="tocitem" href="../generated/tutorials/multisubject/">Multi-subject simulation</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../generated/reference/overview/">Overview: Toolbox Functions</a></li><li><a class="tocitem" href="../generated/reference/noisetypes/">Overview: NoiseTypes</a></li><li><a class="tocitem" href="../generated/reference/onsettypes/">Overview: OnsetTypes</a></li><li><a class="tocitem" href="../generated/reference/basistypes/">Overview: Components (EEG, fMRI, Pupil)</a></li></ul></li><li><span class="tocitem">HowTo</span><ul><li><a class="tocitem" href="../generated/HowTo/newDesign/">Define a new, (imbalanced) design</a></li><li><a class="tocitem" href="../generated/HowTo/repeatTrials/">Repeating a design</a></li><li><a class="tocitem" href="../generated/HowTo/newComponent/">Define a new duration &amp; jitter component</a></li><li><a class="tocitem" href="../generated/HowTo/multichannel/">Generate multi channel data</a></li><li><a class="tocitem" href="../generated/HowTo/predefinedData/">Use predefined design / onsets data</a></li></ul></li><li class="is-active"><a class="tocitem" href>API / DocStrings</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API / DocStrings</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API / DocStrings</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldSim.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.AutoRegressiveNoise" href="#UnfoldSim.AutoRegressiveNoise"><code>UnfoldSim.AutoRegressiveNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AutoRegressiveNoise &lt;: AbstractNoise</code></pre><p>Not implemented</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L59-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.ExponentialNoise" href="#UnfoldSim.ExponentialNoise"><code>UnfoldSim.ExponentialNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ExponentialNoise &lt;: AbstractNoise</code></pre><p>Noise with exponential decay in AR spectrum.</p><p><code>noiselevel</code> is used to scale the noise</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Current implementation: Cholesky of NxN matrix needs to be calculated, which might need lots of RAM.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L67-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.LinearModelComponent" href="#UnfoldSim.LinearModelComponent"><code>UnfoldSim.LinearModelComponent</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A multiple regression component for one subject</p><ul><li><code>basis</code>: an object, if accessed, provides a &#39;basis-function&#39;, e.g. <code>hanning(40)</code>, this defines the response at a single event. It will be weighted by the model-prediction</li><li><code>formula</code>: StatsModels Formula-Object  <code>@formula 0~1+cond</code> (left side must be 0)</li><li><code>β</code> Vector of betas, must fit the formula</li><li><code>contrasts</code>: Dict. Default is empty, e.g. <code>Dict(:condA=&gt;EffectsCoding())</code></li></ul><p>All arguments can be named, in that case <code>contrasts</code> is optional</p><p>Works best with <code>SingleSubjectDesign</code></p><pre><code class="language-julia hljs">LinearModelComponent(;
    basis=hanning(40),
    formula=@formula(0~1+cond),
    β = [1.,2.],
    contrasts=Dict(:cond=&gt;EffectsCoding())
)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L32-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.LogNormalOnset" href="#UnfoldSim.LogNormalOnset"><code>UnfoldSim.LogNormalOnset</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">@with_kw struct LogNormalOnset &lt;: AbstractOnset</code></pre><p>Log-normal inter-event distances using the <code>Distributions.jl</code> truncated LogNormal distribution.</p><p>Be careful with large <code>μ</code> and <code>σ</code> values, as they are on logscale. σ&gt;8 can quickly give you out-of-memory sized signals!</p><p>For a more advanced parameter specification, see <code>LogNormalOnsetFormula, which allows to specify the onset-parameters depending on the</code>Design` employed via linear regression model</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/onset.jl#L17-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.MixedModelComponent" href="#UnfoldSim.MixedModelComponent"><code>UnfoldSim.MixedModelComponent</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A component that adds a hierarchical relation between parameters according to a LMM defined via MixedModels.jl</p><ul><li><code>basis</code>: an object, if accessed, provides a &#39;basis-function&#39;, e.g. <code>hanning(40)</code>, this defines the response at a single event. It will be weighted by the model-prediction</li><li><code>formula</code>: Formula-Object in the style of MixedModels.jl e.g. <code>@formula 0~1+cond + (1|subject)</code> - left-handside is ignored</li><li><code>β</code> Vector of betas, must fit the formula</li><li><code>σs</code> Dict of random effect variances, e.g. <code>Dict(:subject=&gt;[0.5,0.4])</code> or to specify correlationmatrix <code>Dict(:subject=&gt;[0.5,0.4,I(2,2)],...)</code>. Technically, this will be passed to MixedModels.jl <code>create_re</code> function, which creates the θ matrices.</li><li><code>contrasts</code>: Dict in the style of MixedModels.jl. Default is empty.</li></ul><p>All arguments can be named, in that case <code>contrasts</code> is optional</p><p>Works best with <code>MultiSubjectDesign</code></p><pre><code class="language-julia hljs">MixedModelComponent(;
    basis=hanning(40),
    formula=@formula(0~1+cond+(1+cond|subject)),
    β = [1.,2.],
    σs= Dict(:subject=&gt;[0.5,0.4]),
    contrasts=Dict(:cond=&gt;EffectsCoding())
)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L1-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.MultiSubjectDesign" href="#UnfoldSim.MultiSubjectDesign"><code>UnfoldSim.MultiSubjectDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MultiSubjectDesign</code></pre><ul><li><code>n_subjects</code>::Int -&gt; number of subjects</li><li><code>n_items</code>::Int -&gt; number of items (sometimes ≈trials)</li><li><code>subjects_between</code> = Dict{Symbol,Vector} -&gt; effects between subjects, e.g. young vs old </li><li><code>items_between</code> = Dict{Symbol,Vector} -&gt; effects between items, e.g. natural vs artificial images, (but shown to all subjects if not specified also in <code>subjects_between</code>)</li><li><code>both_within</code> = Dict{Symbol,Vector}	-&gt; effects completly crossed</li><li><code>event_order_function</code> = <code>x-&gt;x</code>; # can be used to sort, or e.g. <code>x-&gt;shuffle(MersenneTwister(42),x)</code> - be sure to fix/update the rng accordingly!!</li></ul><p>tipp: check the resulting dataframe using <code>generate_events(design)</code></p><pre><code class="language-julia hljs"># declaring same condition both sub-between and item-between results in a full between subject/item design
design = MultiSubjectDesign(;
		n_items = 10,
		n_subjects = 30,
		subjects_between = Dict(:cond =&gt; [&quot;levelA&quot;, &quot;levelB&quot;]),
		items_between = Dict(:cond =&gt; [&quot;levelA&quot;, &quot;levelB&quot;]),
		);</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/design.jl#L1-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.MultichannelComponent" href="#UnfoldSim.MultichannelComponent"><code>UnfoldSim.MultichannelComponent</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Wrapper for an <code>AbstractComponent</code> to project it to multiple target-channels via <code>projection</code>. optional adds <code>noise</code> to the source prior to projection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L61-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.NoNoise" href="#UnfoldSim.NoNoise"><code>UnfoldSim.NoNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NoNoise &lt;: AbstractNoise</code></pre><p>Return zeros instead of noise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L52-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.NoOnset" href="#UnfoldSim.NoOnset"><code>UnfoldSim.NoOnset</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct NoOnset &lt;: AbstractOnset end</code></pre><p>In the case that the user directly wants no overlap to be simulated (=&gt; epoched data).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/onset.jl#L32-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.PinkNoise" href="#UnfoldSim.PinkNoise"><code>UnfoldSim.PinkNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PinkNoise &lt;: AbstractNoise</code></pre><p>Generate Pink Noise using the SignalAnalysis.jl implementation.</p><p><code>noiselevel</code> is used to scale the noise</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L6-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.RealisticNoise" href="#UnfoldSim.RealisticNoise"><code>UnfoldSim.RealisticNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RealisticNoise &lt;: AbstractNoise</code></pre><p>Not implemented - planned to use Artefacts.jl to provide real EEG data to add.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L44-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.RedNoise" href="#UnfoldSim.RedNoise"><code>UnfoldSim.RedNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RedNoise &lt;: AbstractNoise</code></pre><p>Generate Red Noise using the SignalAnalysis.jl implementation.</p><p><code>noiselevel</code> is used to scale the noise</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L18-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.RepeatDesign" href="#UnfoldSim.RepeatDesign"><code>UnfoldSim.RepeatDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RepeatDesign{T}</code></pre><p>Repeat a design DataFrame multiple times to mimick repeatedly recorded trials.</p><pre><code class="language-julia hljs">designOnce = MultiSubjectDesign(;
		n_items=2,
		n_subjects = 2,
		subjects_between =Dict(:cond=&gt;[&quot;levelA&quot;,&quot;levelB&quot;]),
		items_between =Dict(:cond=&gt;[&quot;levelA&quot;,&quot;levelB&quot;]),
		);

design = RepeatDesign(designOnce,4);</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/design.jl#L135-L149">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.SingleSubjectDesign" href="#UnfoldSim.SingleSubjectDesign"><code>UnfoldSim.SingleSubjectDesign</code></a> — <span class="docstring-category">Type</span></header><section><div><ul><li>conditions = Dict{Symbol,Vector} of conditions, e.g. <code>Dict(:A=&gt;[&quot;a_small&quot;,&quot;a_big&quot;],:B=&gt;[&quot;b_tiny&quot;,&quot;b_large&quot;])</code></li><li><code>event_order_function</code> = x-&gt;x; # can be used to sort, or x-&gt;shuffle(MersenneTwister(42),x) - be sure to fix/update the rng accordingly!!</li></ul><p>Number of trials / rows in <code>generate_events(design)</code> depend on the full factorial of your <code>conditions</code>.</p><p>To increase the number of repetitions simply use <code>RepeatDesign(SingleSubjectDesign(...),5)</code></p><p>If conditions are omitted (or set to <code>nothing</code>), a single trial is simulated with a column <code>:dummy</code> and content <code>:dummy</code> - this is for convenience.</p><p>tipp: check the resulting dataframe using <code>generate_events(design)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/design.jl#L35-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.UniformOnset" href="#UnfoldSim.UniformOnset"><code>UnfoldSim.UniformOnset</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct UniformOnset &lt;: AbstractOnset</code></pre><p>Provide a Uniform Distribution of the inter-event-distances. <code>width</code>  is the width of the uniform distribution (=&gt; the jitter). Since the lower bound is 0, <code>width</code> is also the upper bound. <code>offset</code> is the minimal distance. The maximal distance is <code>offset + width</code>.</p><p>For a more advanced parameter specification, see <code>UniformOnsetFormula</code><code>, which allows to specify the onset-parameters depending on the</code>Design` employed via a linear regression model</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/onset.jl#L5-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.UniformOnsetFormula" href="#UnfoldSim.UniformOnsetFormula"><code>UnfoldSim.UniformOnsetFormula</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">UniformOnsetFormula &lt;: AbstractOnset</code></pre><p>provide a Uniform Distribution of the inter-event-distances, but with regression formulas. This is helpful if your overlap/event-distribution should be dependend on some condition, e.g. more overlap in cond=&#39;A&#39; than cond=&#39;B&#39;.</p><pre><code class="nohighlight hljs">- `width`:  is the width of the uniform distribution (=&gt; the jitter). Since the lower bound is 0, `width` is also the upper bound.
    -`width_formula`: choose a formula depending on your `Design`
    -`width_β`: Choose a vector of betas, number needs to fit the formula chosen
    -`width_contrasts` (optional): Choose a contrasts-dictionary according to the StatsModels specifications
`offset` is the minimal distance. The maximal distance is `offset + width`.
    -`offset_formula`: choose a formula depending on your `design`
    -`offset_β`: Choose a vector of betas, number needs to fit the formula chosen
    -`offset_contrasts` (optional): Choose a contrasts-dictionary according to the StatsModels specifications</code></pre><p>See <code>UniformOnset</code> for a simplified version without linear regression specifications</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/onset.jl#L82-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.WhiteNoise" href="#UnfoldSim.WhiteNoise"><code>UnfoldSim.WhiteNoise</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">WhiteNoise &lt;: WhiteNoise
noiselevel = 1
imfilter = 0</code></pre><p>Generate White Noise using <code>randn</code> - thus Gaussian noise. <code>noiselevel</code> is used to scale the noise</p><p>Using <code>imfilter</code> &gt; 0 it is possible to smooth the noise using Image.imfilter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L30-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.size-Tuple{MultiSubjectDesign}" href="#Base.size-Tuple{MultiSubjectDesign}"><code>Base.size</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns dimension of experiment design</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/design.jl#L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DSP.Windows.hanning-Tuple{Any, Any, Any}" href="#DSP.Windows.hanning-Tuple{Any, Any, Any}"><code>DSP.Windows.hanning</code></a> — <span class="docstring-category">Method</span></header><section><div><p>generate a hanning window</p><p>duration: in s offset: in s, defines hanning peak sfreq: sampling rate in Hz</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/bases.jl#L28-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.PuRF-Tuple{}" href="#UnfoldSim.PuRF-Tuple{}"><code>UnfoldSim.PuRF</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">PuRF()</code></pre><p>Default generator for PuRF Pupil Response Function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/bases.jl#L41-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.add_noise!-Tuple{Any, AbstractNoise, Any}" href="#UnfoldSim.add_noise!-Tuple{Any, AbstractNoise, Any}"><code>UnfoldSim.add_noise!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_noise!(rng, noisetype::AbstractNoise, signal)</code></pre><p>Generate and add noise to a data matrix. Assumes that the signal can be linearized, that is, that the noise is stationary</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L135-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.add_responses!-Tuple{Any, Vector, Vararg{Any, 4}}" href="#UnfoldSim.add_responses!-Tuple{Any, Vector, Vararg{Any, 4}}"><code>UnfoldSim.add_responses!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_responses!(signal, responses::Vector, e, s, tvec, erpvec)
add_responses!(signal, responses::Matrix, e, s, tvec, erpvec)
add_responses!(signal, responses::AbstractArray, e, s, tvec, erpvec)</code></pre><p>Helper function to add inplace the responses to the signal, but for both 2D (1 channel) and 3D (X channel case).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/simulation.jl#L165-L170">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.closest_src-Tuple{AbstractVector{&lt;:AbstractVector}, Any}" href="#UnfoldSim.closest_src-Tuple{AbstractVector{&lt;:AbstractVector}, Any}"><code>UnfoldSim.closest_src</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">closest_src(coords_list::AbstractVector{&lt;:AbstractVector}, pos)
closest_src(coords::Vector{&lt;:Real}, pos)</code></pre><p>Takes an array of &#39;m&#39; target coordinate vector (size 3) (or vector of vectors) and a matrix (n-by-3) of all available positions, and returns an array of size &#39;m&#39; containing the indices of the respective items in &#39;pos&#39; that are nearest to each of the target coordinates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/helper.jl#L47-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.closest_src-Tuple{Hartmut, String}" href="#UnfoldSim.closest_src-Tuple{Hartmut, String}"><code>UnfoldSim.closest_src</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">closest_src(head::Hartmut,label::String)</code></pre><p>Returns src-<code>ix</code> of the Headmodel <code>Hartmut</code> which is closest to the average of the <code>label</code>.</p><div class="admonition is-category-important"><header class="admonition-header">Important</header><div class="admonition-body"><p>We use the average in eucledean space, but the cortex is a curved surface. In most cases they will not overlap. Ideally we would calculate the average on the surface, but this is a bit more complex to do (you&#39;d need to calculate the vertices etc.)</p></div></div><pre><code class="language-julia hljs">hartmut = headmodel()
pos = closest_src(hartmut=&gt;&quot;Left Middle Temporal Gyrus, posterior division&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/helper.jl#L71-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.convert-NTuple{4, Any}" href="#UnfoldSim.convert-NTuple{4, Any}"><code>UnfoldSim.convert</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Obsolete - # TODO: Transfer function to Unfold.jl</p><p>Function to convert output similar to unfold (data, events)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/helper.jl#L15-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.create_continuous_signal-Tuple{Any, Any, Any}" href="#UnfoldSim.create_continuous_signal-Tuple{Any, Any, Any}"><code>UnfoldSim.create_continuous_signal</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">create_continuous_signal(rng, responses, simulation)</code></pre><p>Based on the responses and simulation parameters, simulate onset latencies and add together a continuous signal.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/simulation.jl#L107-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.epoch-Tuple{AbstractVector, Vararg{Any}}" href="#UnfoldSim.epoch-Tuple{AbstractVector, Vararg{Any}}"><code>UnfoldSim.epoch</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">epoch(data::AbstractVector, args...; kwargs...)
epoch(
    data::AbstractArray{T,2},
    events,
    τ::Tuple{Number,Number},
    sfreq;
    eventtime::Symbol = :latency,
) where {T&lt;:Union{Missing,Number}}</code></pre><p>Helper function to epoch data.</p><p>Adapted from Unfold.jl: https://github.com/unfoldtoolbox/Unfold.jl/blob/b3a21c2bb7e93d2f45ec64b0197f4663a6d7939a/src/utilities.jl#L40</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/helper.jl#L98-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.generate_designmatrix-Tuple{Any, Any, Any}" href="#UnfoldSim.generate_designmatrix-Tuple{Any, Any, Any}"><code>UnfoldSim.generate_designmatrix</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Helper function to generate a designmatrix from formula, events and contrasts.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L155-L157">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.generate_events-Tuple{MultiSubjectDesign}" href="#UnfoldSim.generate_events-Tuple{MultiSubjectDesign}"><code>UnfoldSim.generate_events</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_events(design::MultiSubjectDesign)</code></pre><p>Generate full factorial Dataframe according to MixedModelsSim.jl &#39;s <code>simdat_crossed</code> function. Note: n_items = you can think of it as <code>trials</code> or better, as <code>stimuli</code>.</p><p>Note: No condition can be named <code>dv</code> which is used internally in MixedModelsSim / MixedModels as a dummy left-side</p><p>Afterwards applies <code>design.event_order_function</code>`.  Could be used to duplicate trials, sort, subselect etc.</p><p>Finally it sorts by <code>:subject</code></p><p>julia&gt; d = MultiSubjectDesign(;n<em>subjects = 10,n</em>items=20,both<em>within= Dict(:A=&gt;nlevels(5),:B=&gt;nlevels(2))) julia&gt; generate</em>events(d)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/design.jl#L83-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.generate_events-Tuple{RepeatDesign}" href="#UnfoldSim.generate_events-Tuple{RepeatDesign}"><code>UnfoldSim.generate_events</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">UnfoldSim.generate_events(design::RepeatDesign{T})</code></pre><p>In a repeated design, iteratively calls the underlying {T} Design and concatenates. In case of MultiSubjectDesign, sorts by subject.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/design.jl#L155-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.generate_events-Tuple{SingleSubjectDesign}" href="#UnfoldSim.generate_events-Tuple{SingleSubjectDesign}"><code>UnfoldSim.generate_events</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Generates full-factorial DataFrame of design.conditions</p><p>Afterwards applies design.event<em>order</em>function.</p><p>If conditions is <code>nothing</code>, a single trial is simulated with a column <code>:dummy</code> and content <code>:dummy</code> - this is for convenience.</p><p>julia&gt; d = SingleSubjectDesign(;conditions= Dict(:A=&gt;nlevels(5),:B=&gt;nlevels(2))) julia&gt; generate_events(d)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/design.jl#L57-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.hartmut_citation-Tuple{}" href="#UnfoldSim.hartmut_citation-Tuple{}"><code>UnfoldSim.hartmut_citation</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns citation-string for HArtMuT</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/headmodel.jl#L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.headmodel-Tuple{}" href="#UnfoldSim.headmodel-Tuple{}"><code>UnfoldSim.headmodel</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Load a headmodel, using Artifacts.jl automatically downloads the required files</p><p>Currently only <code>type=&quot;hartmut&quot;</code> is implemented</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/headmodel.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.hrf-Tuple{}" href="#UnfoldSim.hrf-Tuple{}"><code>UnfoldSim.hrf</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Generate a HRF kernel. </p><p>TR = 1/sfreq default parameters taken from SPM</p><p>Code adapted from Unfold.jl</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/bases.jl#L54-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.leadfield-Tuple{Hartmut}" href="#UnfoldSim.leadfield-Tuple{Hartmut}"><code>UnfoldSim.leadfield</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Returns the leadfield</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/headmodel.jl#L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.magnitude-Tuple{AbstractHeadmodel}" href="#UnfoldSim.magnitude-Tuple{AbstractHeadmodel}"><code>UnfoldSim.magnitude</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Extracts magnitude of the orientation-including leadfield.</p><p>By default uses the orientation specified in the headmodel</p><p>Fallback: along the third dimension using <code>norm</code> - the maximal projection</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/headmodel.jl#L79-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.magnitude-Tuple{Hartmut}" href="#UnfoldSim.magnitude-Tuple{Hartmut}"><code>UnfoldSim.magnitude</code></a> — <span class="docstring-category">Method</span></header><section><div><p>magnitude(headmodel::Hartmut; type = &quot;perpendicular&quot;) = Extract magnitude of 3-orientation-leadfield,  <code>type</code> (default: &quot;perpendicular&quot;) =&gt; uses the provided source-point orientations - otherwise falls back to <code>norm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/headmodel.jl#L88-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.magnitude-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T&lt;:Real" href="#UnfoldSim.magnitude-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T&lt;:Real"><code>UnfoldSim.magnitude</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">magnitude(lf::AbstractArray{T,3}) where {T&lt;:Real}</code></pre><p>If orientation is not specified, returns the maximal magnitude (norm of leadfield).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/headmodel.jl#L112-L115">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.magnitude-Union{Tuple{T}, Tuple{AbstractArray{T, 3}, AbstractMatrix{T}}} where T&lt;:Real" href="#UnfoldSim.magnitude-Union{Tuple{T}, Tuple{AbstractArray{T, 3}, AbstractMatrix{T}}} where T&lt;:Real"><code>UnfoldSim.magnitude</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">magnitude(lf::AbstractArray{T,3}, orientation::AbstractArray{T,2}) where {T&lt;:Real}</code></pre><p>Return the magnitude along an orientation of the leadfield.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/headmodel.jl#L97-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.maxlength-Tuple{Vector{&lt;:AbstractComponent}}" href="#UnfoldSim.maxlength-Tuple{Vector{&lt;:AbstractComponent}}"><code>UnfoldSim.maxlength</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">maxlength(c::Vector{&lt;:AbstractComponent}) = maximum(length.(c))</code></pre><p>maximum of individual component lengths</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L125-L128">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.n170-Tuple{}" href="#UnfoldSim.n170-Tuple{}"><code>UnfoldSim.n170</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">n170(;sfreq=100)</code></pre><p>Generator for Hanning window, negative (!) peak at 170ms, width 150ms, at kwargs <code>sfreq</code> (default 100). Returns a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/bases.jl#L16-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.n400-Tuple{}" href="#UnfoldSim.n400-Tuple{}"><code>UnfoldSim.n400</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">n400(;sfreq=100)</code></pre><p>Generator for Hanning window, negative (!) peak at 400ms, width 400ms, at kwargs <code>sfreq</code> (default 100). Returns a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/bases.jl#L22-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.n_channels-Tuple{AbstractComponent}" href="#UnfoldSim.n_channels-Tuple{AbstractComponent}"><code>UnfoldSim.n_channels</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">n_channels(c::AbstractComponent)</code></pre><p>Return the number of channels. By default = 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L84-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.n_channels-Tuple{MultichannelComponent}" href="#UnfoldSim.n_channels-Tuple{MultichannelComponent}"><code>UnfoldSim.n_channels</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">n_channels(c::MultichannelComponent)</code></pre><p>For <code>MultichannelComponent</code> return the length of the projection vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L90-L94">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.n_channels-Tuple{Vector{&lt;:AbstractComponent}}" href="#UnfoldSim.n_channels-Tuple{Vector{&lt;:AbstractComponent}}"><code>UnfoldSim.n_channels</code></a> — <span class="docstring-category">Method</span></header><section><div><p>For a vector of <code>MultichannelComponent</code>s, return the first but asserts all are of equal length.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L97-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.p100-Tuple{}" href="#UnfoldSim.p100-Tuple{}"><code>UnfoldSim.p100</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">p100(;sfreq=100)</code></pre><p>Generator for Hanning window, peak at 100ms, width 100ms, at kwargs <code>sfreq</code> (default 100). Returns a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/bases.jl#L4-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.p300-Tuple{}" href="#UnfoldSim.p300-Tuple{}"><code>UnfoldSim.p300</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">p300(;sfreq=100)</code></pre><p>Generator for Hanning window, peak at 300ms, width 300ms, at kwargs <code>sfreq</code> (default 100). Returns a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/bases.jl#L10-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.pad_array-Tuple{Vector, Tuple, Any}" href="#UnfoldSim.pad_array-Tuple{Vector, Tuple, Any}"><code>UnfoldSim.pad_array</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Pads array with specified value, length pad_array(arr, len, val)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/helper.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.predef_2x2-Tuple{Random.AbstractRNG}" href="#UnfoldSim.predef_2x2-Tuple{Random.AbstractRNG}"><code>UnfoldSim.predef_2x2</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">predef_2x2(rng::AbstractRNG;kwargs...)</code></pre><p>The most used <code>kwargs</code> is: <code>return_epoched=true</code> which returns already epoched data. If you want epoched data without overlap, specify <code>onset=NoOnset()</code> and <code>return_epoched=true</code></p><p><strong>design</strong></p><ul><li><code>n_items</code>=100,</li><li><code>n_subjects</code>=1,</li><li><code>conditions</code> = Dict(:A=&gt;[&quot;a<em>small&quot;,&quot;a</em>big&quot;],:B=&gt;[&quot;b<em>tiny&quot;,&quot;b</em>large&quot;]),</li><li><code>event_order_function</code> = x-&gt;shuffle(deepcopy(rng),x),</li></ul><p><strong>component / signal</strong></p><ul><li><code>signalsize</code> = 100, length of simulated hanning window</li><li><code>basis</code><code>= hanning(signalsize), the actual &quot;function&quot;,</code>signalsize` is only used here</li><li><code>β</code> = [1,-0.5,.5,+1], the parameters</li><li><code>σs</code> = Dict(:subject=&gt;[1,0.5,0.5,0.5],:item=&gt;[1]), - only in n_subjects&gt;=2 case, specifies the random effects</li><li><code>contrasts</code> = Dict(:A=&gt;EffectsCoding(),:B=&gt;EffectsCoding()) - effect coding by default</li><li><code>formula</code> = n_subjects==1 ? @formula(0~1+A<em>B) : @formula(dv~1+A</em>B+(A*B|subject)+(1|item)),</li></ul><p><strong>noise</strong></p><ul><li><code>noiselevel</code> = 0.2,</li><li><code>noise</code> = PinkNoise(;noiselevel=noiselevel),</li></ul><p><strong>onset</strong></p><ul><li><code>overlap</code> = (0.5,0.2),</li><li><code>onset</code>=UniformOnset(;offset=signalsize<em>overlap[1],width=signalsize</em>overlap[2]), #put offset to 1 for no overlap. put width to 0 for no jitter</li></ul><p>Careful if you modify n<em>items with n</em>subjects = 1, n_items has to be a multiple of 4 (or your equivalent conditions factorial, e.g. all combinations length)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/predefinedSimulations.jl#L140-L170">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.predef_eeg-Tuple{Any}" href="#UnfoldSim.predef_eeg-Tuple{Any}"><code>UnfoldSim.predef_eeg</code></a> — <span class="docstring-category">Method</span></header><section><div><p>predef<em>eeg(;kwargs...) predef</em>eeg(rng;kwargs...) predef<em>eeg(rng,n</em>subjects;kwargs...)</p><p>Generate a P1/N1/P3 complex. In case <code>n_subjects</code> is defined - <code>MixedModelComponents</code> are generated, else <code>LinearModelComponents</code>.</p><p>The most used <code>kwargs</code> is: <code>return_epoched=true</code> which returns already epoched data. If you want epoched data without overlap, specify <code>onset=NoOnset()</code> and <code>return_epoched=true</code></p><p><strong>Default params:</strong></p><ul><li>n_repeats = 100</li><li>event<em>order</em>function = x-&gt;shuffle(deepcopy(rng),x # random trial order</li><li>conditions = Dict(...),</li></ul><p><strong>component / signal</strong></p><ul><li>sfreq = 100,</li><li>p1 = (p100(;sfreq=sfreq), @formula(0~1),[5],Dict()), # P1 amp 5, no effects</li><li>n1 = (n170(;sfreq=sfreq), @formula(0~1+condition),[5,-3],Dict()), # N1 amp 5, dummycoded condition effect (levels &quot;car&quot;, &quot;face&quot;) of -3</li><li>p3 = (p300(;sfreq=sfreq), @formula(0~1+continuous),[5,1],Dict()), # P3 amp 5, continuous effect range [-5,5] with slope 1</li></ul><p><strong>noise</strong></p><ul><li>noiselevel = 0.2,</li><li>noise = PinkNoise(;noiselevel=noiselevel),</li></ul><p><strong>onset</strong></p><ul><li>overlap = (0.5,0.2), # offset + width/length of Uniform noise. put offset to 1 for no overlap. put width to 0 for no jitter</li><li>onset=UniformOnset(;offset=sfreq<em>0.5</em>overlap[1],width=sfreq<em>0.5</em>overlap[2]), </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/predefinedSimulations.jl#L9-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_and_add!-Tuple{AbstractMatrix, Any, Any, Any}" href="#UnfoldSim.simulate_and_add!-Tuple{AbstractMatrix, Any, Any, Any}"><code>UnfoldSim.simulate_and_add!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_and_add!(epoch_data::AbstractMatrix, c, simulation, rng)
simulate_and_add!(epoch_data::AbstractArray, c, simulation, rng)</code></pre><p>Helper function to call <code>simulate_component</code> and add it to a provided Array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L326-L330">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_component-Tuple{Any, AbstractComponent, Simulation}" href="#UnfoldSim.simulate_component-Tuple{Any, AbstractComponent, Simulation}"><code>UnfoldSim.simulate_component</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_component(rng, c::AbstractComponent, simulation::Simulation)</code></pre><p>By default call <code>simulate_component</code> with <code>(::Abstractcomponent,::AbstractDesign)</code> instead of the whole simulation. This allows users to provide a hook to do something completely different :)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L131-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_component-Tuple{Any, LinearModelComponent, AbstractDesign}" href="#UnfoldSim.simulate_component-Tuple{Any, LinearModelComponent, AbstractDesign}"><code>UnfoldSim.simulate_component</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_component(rng, c::AbstractComponent, simulation::Simulation)</code></pre><p>Generate a linear model design matrix, weight it by c.β and multiply the result with the given basis vector.</p><p>julia&gt; c = UnfoldSim.LinearModelComponent([0,1,1,0],@formula(0~1+cond),[1,2],Dict()) julia&gt; design = MultiSubjectDesign(;n<em>subjects=2,n</em>items=50,items<em>between=(;:cond=&gt;[&quot;A&quot;,&quot;B&quot;])) julia&gt; simulate</em>component(StableRNG(1),c,design)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L138-L145">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_component-Tuple{Any, MixedModelComponent, AbstractDesign}" href="#UnfoldSim.simulate_component-Tuple{Any, MixedModelComponent, AbstractDesign}"><code>UnfoldSim.simulate_component</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_component(rng, c::MixedModelComponent, design::AbstractDesign)</code></pre><p>Generates a MixedModel and simulates data according to c.β and c.σs.</p><p>A trick is used to remove the Normal-Noise from the MixedModel which might lead to rare numerical instabilities. Practically, we upscale the σs by factor 10000, and provide a σ=0.0001. Internally this results in a normalization where the response scale is 10000 times larger than the noise.</p><p>Currently, it is not possible to use a different basis for fixed and random effects, but a code-stub exists (it is slow though).</p><ul><li><code>return_parameters</code> (Bool,false) - can be used to return the per-event parameters used to weight the basis function. Sometimes useful to see what is simulated</li></ul><p>julia&gt; design = MultiSubjectDesign(;n<em>subjects=2,n</em>items=50,items_between=(;:cond=&gt;[&quot;A&quot;,&quot;B&quot;])) julia&gt; c = UnfoldSim.MixedModelComponent([0.,1,1,0],@formula(0~1+cond+(1|subject)),[1,2],Dict(:subject=&gt;[2],),Dict()) julia&gt; simulate(StableRNG(1),c,design)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L174-L188">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_component-Tuple{Any, MultichannelComponent, AbstractDesign}" href="#UnfoldSim.simulate_component-Tuple{Any, MultichannelComponent, AbstractDesign}"><code>UnfoldSim.simulate_component</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_component(rng,c::MultichannelComponent,design::AbstractDesign)</code></pre><p>Return the projection of a component from source to &quot;sensor&quot; space.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L106-L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_noise-Tuple{Any, NoNoise, Int64}" href="#UnfoldSim.simulate_noise-Tuple{Any, NoNoise, Int64}"><code>UnfoldSim.simulate_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_noise(rng, t::NoNoise, n::Int)</code></pre><p>Return zeros instead of noise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L92-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_noise-Tuple{Any, Union{PinkNoise, RedNoise}, Int64}" href="#UnfoldSim.simulate_noise-Tuple{Any, Union{PinkNoise, RedNoise}, Int64}"><code>UnfoldSim.simulate_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_noise(rng, t::Union{PinkNoise,RedNoise}, n::Int)</code></pre><p>Generate Pink or Red Noise using the <code>SignalAnalysis.jl</code> implementation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/noise.jl#L83-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_onsets-Tuple{Any, AbstractOnset, Simulation}" href="#UnfoldSim.simulate_onsets-Tuple{Any, AbstractOnset, Simulation}"><code>UnfoldSim.simulate_onsets</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_onsets(rng, onset::AbstractOnset, simulation::Simulation)</code></pre><p>Call <code>simulate_interonset_distances</code> to generate distances between events and then add them up to generate the actual latencies in samples.</p><p><strong>main call from <code>simulation</code></strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/onset.jl#L63-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.simulate_responses-Tuple{Any, Vector{&lt;:AbstractComponent}, Simulation}" href="#UnfoldSim.simulate_responses-Tuple{Any, Vector{&lt;:AbstractComponent}, Simulation}"><code>UnfoldSim.simulate_responses</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate_responses(
    rng,
    components::Vector{&lt;:AbstractComponent},
    simulation::Simulation)</code></pre><p>Simulate multiple component responses and accumulates them on a per-event basis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L300-L306">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldSim.weight_σs-Tuple{Dict, Float64, Float64}" href="#UnfoldSim.weight_σs-Tuple{Dict, Float64, Float64}"><code>UnfoldSim.weight_σs</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Weights a σs Dict for MixedModels.jl by a Float64</p><p>Finally sales it by σ_lmm, as a trick to simulate noise-free LMMs</p><p>I anticipate a function     <code>function weight_σs(σs::Dict,b_σs::Dict,σ_lmm::Float64)</code> where each σs entry can be weighted individually</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldSim.jl/blob/febed4adaaf114896aaed23c9b464906830dbec2/src/component.jl#L263-L271">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../generated/HowTo/predefinedData/">« Use predefined design / onsets data</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Friday 9 August 2024 11:41">Friday 9 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
